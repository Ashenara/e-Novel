{{- $.Scratch.Add "search" slice -}}

{{- $novelPages := where .Site.Pages "Section" "novels" -}}

{{- $novelsOnly := where $novelPages "IsNode" true -}}
{{- $novelsOnly = where $novelsOnly "Params.excludeFromLists" "!=" true -}}

{{- range $novelsOnly -}}
    {{- $.Scratch.Add "search" (dict
        "title" .Title
        "permalink" .Permalink
        "writer" (default "" .Params.writer)
      ) -}}
{{- end -}}

{{- $.Scratch.Get "search" | jsonify -}}